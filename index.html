<!DOCTYPE html>
<html>
<head>
  <title>Sudoku Solver</title>
  <style>
    html {
      background-color:#e6e9ef;
      color:#4c4f69;
    }
    body {
      display: flex;
      flex-direction:column;
      align-items:center;
    }
    table {
      border-collapse: collapse;
      border: 2px solid #000
    }
    tbody>:nth-child(3n){
      border-bottom:2px solid #000
    }
    tr>:nth-child(3n){
      border-right:2px solid #000
    }
    table td {
      width: 40px;
      height: 40px;
      text-align: center;
      border: 1px solid rgba(124, 127, 147, 0.2);
      background-color:#dce0e8;
    }

    input {
      width: 100%;
      height: 100%;
      font-size: 32px;
      text-align: center;
      border: none;
      padding: 0;
      margin: 0;
      background-color:#eff1f5;
      color:#4c4f69;
    }

    .submit-btn {
      margin-top: 10px;
    }
  </style>
  <script>
    function solveSudoku() {
      const grid = [];

      // Loop through each row of the table
      const rows = document.querySelectorAll('tbody tr');
      rows.forEach(row => {
        const cells = row.querySelectorAll('td input');
        const rowData = Array.from(cells).map(cell => parseInt(cell.value) || 0);
        grid.push(rowData);
      });

      // Solve the Sudoku grid
      const solvedGrid = solveSudokuGrid(grid);

      if (!solvedGrid) {
        displayErrorMessage('Invalid or unsolvable grid');
        return;
      }

      // Display the solved grid in the console
      console.log(solvedGrid);

      // Update the input fields with the solved grid values
      const inputFields = document.querySelectorAll('tbody tr td input');
      inputFields.forEach((input, index) => {
        const row = Math.floor(index / 9);
        const col = index % 9;
        input.value = solvedGrid[row][col] !== 0 ? solvedGrid[row][col] : '';
      });

      clearErrorMessage();
    }

    function handleCellClick(input) {
      if (!input.value) {
        input.value = 1;
      } else {
        const currentValue = parseInt(input.value);
        const newValue = currentValue === 9 ? 1 : currentValue + 1;
        input.value = newValue;
      }

      clearErrorMessage();
    }

    function solveSudokuGrid(grid) {
      if (!isValidGrid(grid)) {
        return false;
      }

      if (isSolved(grid)) {
        return grid;
      }

      const emptyCell = findEmptyCell(grid);
      const row = emptyCell[0];
      const col = emptyCell[1];

      for (let num = 1; num <= 9; num++) {
        if (isValidMove(grid, row, col, num)) {
          grid[row][col] = num;

          if (solveSudokuGrid(grid)) {
            return grid;
          }

          grid[row][col] = 0;
        }
      }

      return false;
    }

    function isValidGrid(grid) {
      // Check if the grid is a 9x9 array
      if (grid.length !== 9) {
        return false;
      }

      for (let i = 0; i < 9; i++) {
        if (grid[i].length !== 9) {
          return false;
        }
      }

      // Check if each cell contains a number from 1 to 9 or 0 for empty cells
      for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
          const num = grid[row][col];
          if (num < 0 || num > 9) {
            return false;
          }
        }
      }

      // Check if there are duplicate numbers in rows, columns, and 3x3 squares
      for (let i = 0; i < 9; i++) {
        if (!isValidSet(grid[i]) || !isValidSet(getColumn(grid, i)) || !isValidSet(getSquare(grid, i))) {
          return false;
        }
      }

      return true;
    }

    function isValidSet(arr) {
      const set = new Set();

      for (let i = 0; i < arr.length; i++) {
        if (arr[i] !== 0) {
          if (set.has(arr[i])) {
            return false;
          }
          set.add(arr[i]);
        }
      }

      return true;
    }

    function getColumn(grid, col) {
      const column = [];

      for (let i = 0; i < grid.length; i++) {
        column.push(grid[i][col]);
      }

      return column;
    }

    function getSquare(grid, square) {
      const startRow = Math.floor(square / 3) * 3;
      const startCol = (square % 3) * 3;
      const squareValues = [];

      for (let i = 0; i < 3; i++) {
        for (let j = 0; j < 3; j++) {
          squareValues.push(grid[startRow + i][startCol + j]);
        }
      }

      return squareValues;
    }

    function isSolved(grid) {
      // Check if all cells are filled
      for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
          if (grid[row][col] === 0) {
            return false;
          }
        }
      }

      return true;
    }

    function findEmptyCell(grid) {
      // Find the first empty cell (cell with value 0)
      for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
          if (grid[row][col] === 0) {
            return [row, col];
          }
        }
      }

      return [-1, -1];
    }

    function isValidMove(grid, row, col, num) {
      // Check if the number exists in the same row
      for (let c = 0; c < 9; c++) {
        if (grid[row][c] === num) {
          return false;
        }
      }

      // Check if the number exists in the same column
      for (let r = 0; r < 9; r++) {
        if (grid[r][col] === num) {
          return false;
        }
      }

      // Check if the number exists in the same 3x3 box
      const boxStartRow = Math.floor(row / 3) * 3;
      const boxStartCol = Math.floor(col / 3) * 3;
      for (let r = 0; r < 3; r++) {
        for (let c = 0; c < 3; c++) {
          if (grid[boxStartRow + r][boxStartCol + c] === num) {
            return false;
          }
        }
      }

      return true;
    }

    function displayErrorMessage(message) {
      const errorElement = document.getElementById('error-message');
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }

    function clearErrorMessage() {
      const errorElement = document.getElementById('error-message');
      errorElement.textContent = '';
      errorElement.style.display = 'none';
    }
  </script>
</head>
<body>
  <h1>Sudoku Grid Input</h1>
  <p>Please enter the numbers for the Sudoku grid:</p>
  <table>
    <tbody>
      <!-- Create a 9x9 grid of input fields -->
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <tr>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
        <td><input type="text" maxlength="1" pattern="[1-9]" onclick="handleCellClick(this)"></td>
      </tr>
      <!-- Repeat the above row 8 more times -->
      <!-- ... -->
    </tbody>
  </table>
  <button class="submit-btn" onclick="solveSudoku()">Solve</button>
  <div id="error-message" class="error"></div>
</body>
</html>
